[buildout]
extends =
#    https://raw.github.com/collective/buildout.plonetest/master/test-4.3.x.cfg
    https://raw.githubusercontent.com/thet/buildout-base/master/etc/dev.cfg
    https://raw.githubusercontent.com/thet/buildout-base/master/etc/test.cfg
    https://raw.githubusercontent.com/plone/buildout.coredev/5.0/versions.cfg
    versions.cfg

parts +=
    instance
    omelette
    update_contributions
    themepreview
    code-analysis
    codeintel

versions = versions
develop = .

extensions = mr.developer
#always-checkout = force
auto-checkout +=
    ploneorg.theme
    plone.themepreview
    Py-StackExchange
    plone.app.vulnerabilities
    collective.roster
    ploneorg.migration
    collective.transmogrifier
    quintagroup.transmogrifier


[sources]
ploneorg.theme = git git://github.com/plone/ploneorg.theme.git pushurl=git@github.com:plone/ploneorg.theme.git
plone.themepreview = git https://github.com/plone/plone.themepreview egg=false
plone.app.users = git git://github.com/plone/plone.app.users.git pushurl=git@github.com:plone/plone.app.users.git
Py-StackExchange = git git://github.com/lucjon/Py-StackExchange.git
plone.app.vulnerabilities = git git://github.com/plone/plone.app.vulnerabilities.git pushurl=git@github.com:plone/plone.app.vulnerabilities.git
collective.roster = git git@github.com:collective/collective.roster.git
ploneorg.migration = git git@github.com:collective/ploneorg.migration.git

collective.transmogrifier = git git@github.com:collective/collective.transmogrifier.git
quintagroup.transmogrifier = git git@github.com:collective/quintagroup.transmogrifier.git


[instance]
recipe = plone.recipe.zope2instance
user = admin:admin
http-address = 8080
environment-vars = zope_i18n_compile_mo_files true
eggs =
    Plone
    Products.CMFPlone
    ploneorg.core
#    ploneorg.core [migration]
zcml =
    ploneorg.core


[omelette]
recipe = collective.recipe.omelette
eggs = ${instance:eggs}
       ${test:eggs}

[update_contributions]
recipe = zc.recipe.egg:scripts
eggs = ploneorg.core

[themepreview]
recipe = zc.recipe.egg
eggs =
    ${instance:eggs}
    ${test:eggs}
    Sphinx
    sphinx-rtd-theme
    plone.app.robotframework
    sphinxcontrib-robotframework [docs]
scripts =
    sphinx-build

# Usage:
#
# ROBOT_CONFIGURE_PACKAGES=ploneorg.core ROBOT_APPLY_PROFILES=ploneorg.core:default ROBOT_INSTALL_PRODUCTS=Products.DateRecurringIndex bin/sphinx-build src/plone.themepreview/source build

[code-analysis]
recipe = plone.recipe.codeanalysis
directory = ${buildout:directory}/ploneorg
utf8-header = True
prefer-single-quotes=True
imports = True
debug-statements = True
deprecated-aliases = True
zptlint = True

[codeintel]
recipe = corneti.recipes.codeintel
eggs = ${instance:eggs}
extra-paths =
    ${omelette:location}
